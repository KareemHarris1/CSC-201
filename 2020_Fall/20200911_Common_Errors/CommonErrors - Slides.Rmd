---
title: "Common Errors"
author: "D. Howell"
date: "9/11/2020"
output: slidy_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```

##
>At the source of every error which is blamed on the computer you will find at least two human errors, including the error of blaming it on the computer. - Tom Gilb

>There are two ways to write error-free programs; only the third works. - Alan Perlis

##

### Common "pre-error" mistakes

* mismatching parentheses
```{r message=F, warning=F}
try(
  print(rep('nice', 25))
)
try(
  print(rep('nice'), 25)
)
# try(
#   print(rep('nice'), 25))
# )
# try(
#   print(rep('nice', 25)
# )
```

* executing code from a script out of order
```{r message=F, warning=F}
library(ggplot2)

df <- mtcars

# plot mpg against hp
ggplot(df) + 
  geom_point(aes(x = hp, y = mpg))

# remove hp column
df <- df[,-4]

```
 
##

### ‘could not find function’
 * You forgot to load the package that has the function you want to use. Let's try to use %>% and filter() without loading dplyr.
```{r}
# trying to create a column called six_cylinder_TF that returns TRUE when the cyl column has a value of 6 and FALSE when it does not
try(
mutate(
  mtcars, 
  six_cylinder_TF = cyl==6
  )
)
```

```{r message=F, warning=F}
library(dplyr)
try(
  mutate(
  mtcars, 
  six_cylinder_TF = cyl==6
  )
)
```

  * You misspelled the function or got the case wrong.
```{r message=F, warning=F}
try(
  mtuate(
  mtcars, 
  six_cylinder_TF = cyl==6
  )
)

try(
  Mutate(
  mtcars, 
  six_cylinder_TF = cyl==6
  )
)

```

##
### ‘object not found’
This error happens when you call an object in a command, but R doesn't have an object with that name in memory. 

```{r message=F, warning=F}
# make a copy of the mtcars data set in an object names 'mydata'
mydata <- mtcars

# try to print the first six rows of the object you just created
try(
  head(mydat)
)
# oops.

try(
  head(MyData)
)
# nope

try(
  head(mydata)
)
# nailed it
```

##
### : there is no package called 'blahblah'
```{r message=F, warning=F}
try(
  library(bestPackageEver)
)
```
 
##
### Indexing Errors

```{r message=F, warning=F}
# how many rows does mtcars have?
nrow(mtcars)

# how many columns?
ncol(mtcars)

# let's try to get the 29th row and all the columns
df <- data.frame(mtcars)
try(
  df[29,]
)

#  let's try to get the 15th column and all the rows
try(
  df[,15]
)

# let's try to get the 25th through the 40th values of the cyl column
try(
  df$cyl[25:40]
)

# let's get the 10th value in the hp column
try(
  df$hp[10,]
)

try(
  df$hp[10]
)


```

##
### ‘non-numeric argument to a binary operator’

```{r message=F, warning=F}
try(
  1 + 1
)
try(
'one' + 1
)
class(1)
class('one')

yesterday <- '2020-09-10'
try(
  yesterday + 1
)
class(yesterday)

yesterday <- as.Date('2020-09-10')
try(
  yesterday + 1
)
class(yesterday)
```

##
### 'replacement has'

```{r message=F, warning=F}

# let's make a row number column for our copy of mtcars
df <- mtcars
nrow(df)

try(
  df$row_number <- 1:30
)

try(
  df$row_number <- 1:32
)
# or an even better way to do it
try(
  df$row_number <- 1:nrow(df)
)

# or let's take the iris data set and put one of its columns onto the mtcars data
df1 <- mtcars
df2 <- iris

try(
  df1$sepal_length <- df2$Sepal.Length
)
try(
  df1$sepal_length <- df2$Sepal.Length[1:nrow(df1)]
)
summary(df1)

```


## Honorable Mentions

* ‘: cannot open the connection’

```{r message=F, warning=F}

```

* ‘Error in if’

```{r message=F, warning=F}

```

## Debugging

* execute one line at a time until you get to the line that causes the error. 
* Check the line for syntax mistakes
* talk yourself through what I want the command to do
* google it. :)

##
>Another effective technique is to explain your code to someone else. This will often cause you to explain the bug to yourself. Sometimes it takes no more than a few sentences, followed by an embarrassed “Never mind, I see what's wrong. Sorry to bother you.” This works remarkably well; you can even use non-programmers as listeners. One university computer center kept a teddy bear near the help desk. Students with mysterious bugs were required to explain them to the bear before they could speak to a human counselor.
